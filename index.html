<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>·ª®ng d·ª•ng B√°o gi√° v22 - Firebase</title>
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìù</text></svg>">

    <link rel="stylesheet" href="style.css"> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <h1>·ª®ng d·ª•ng T·∫°o B√°o gi√°</h1>
        <div id="auth-container" class="no-print" style="text-align: center; padding: 10px; background-color: #f0f8ff; border-radius: 5px; margin-bottom: 15px;">
            <p id="auth-status">ƒêang k·∫øt n·ªëi...</p>
            <button id="logoutButton" style="display:none;" class="delete-btn small-btn">ƒêƒÉng xu·∫•t</button>
        </div>

        <div class="tabs no-print">
            <button class="tab-button active" data-tab="tabQuote">B√°o Gi√°</button>
            <button class="tab-button" data-tab="tabSavedQuotes">B√°o Gi√° ƒê√£ L∆∞u</button>
            <button class="tab-button" data-tab="tabCatalog">Qu·∫£n L√Ω</button>
            <button class="tab-button" data-tab="tabSettings">C√†i ƒê·∫∑t</button>
        </div>

        <div id="tabQuote" class="tab-content active">
            <!-- N·ªôi dung tab B√°o gi√° kh√¥ng thay ƒë·ªïi -->
            <h2>Th√¥ng tin Chung B√°o gi√°</h2>
            <div class="item-grid">
                <div class="form-group">
                    <label for="customerName">T√™n Kh√°ch h√†ng:</label>
                    <input type="text" id="customerName">
                </div>
                <div class="form-group">
                    <label for="customerAddress">ƒê·ªãa ch·ªâ:</label>
                    <input type="text" id="customerAddress">
                </div>
                <div class="form-group">
                    <label for="quoteDate">Ng√†y b√°o gi√°:</label>
                    <input type="date" id="quoteDate">
                </div>
            </div>
            <div class="form-group">
                 <label for="quoteNotes">Ghi ch√∫ chung (hi·ªÉn th·ªã trong PDF/In):</label>
                 <textarea id="quoteNotes" rows="2"></textarea>
            </div>

            <hr class="no-print">
            <div id="quoteItemEntryForm" class="no-print">
                <h3>Th√™m/S·ª≠a chi ti·∫øt H·∫°ng m·ª•c B√°o gi√°:</h3>
                <input type="hidden" id="editingQuoteItemIdForm">
                <div class="form-group">
                    <label for="quoteItemMainCategoryInput">Ch·ªçn ho·∫∑c nh·∫≠p Danh m·ª•c ch√≠nh:</label>
                    <input type="text" id="quoteItemMainCategoryInput" list="mainCategoryDataList" placeholder="Ch·ªçn ho·∫∑c g√µ ƒë·ªÉ t·∫°o DM ch√≠nh m·ªõi...">
                    <datalist id="mainCategoryDataList">
                        <!-- Options populated by JS -->
                    </datalist>
                </div>
                <div class="form-group">
                    <label for="catalogItemCombobox">1. L·ªçc v√† ch·ªçn nhanh t·ª´ danh m·ª•c:</label>
                    <input type="text" id="catalogItemCombobox" list="catalogDatalist" placeholder="G√µ ƒë·ªÉ t√¨m ho·∫∑c ch·ªçn h·∫°ng m·ª•c...">
                    <datalist id="catalogDatalist">
                        <!-- Options populated by JS -->
                    </datalist>
                </div>
                <div class="form-group">
                    <label for="itemNameQuoteForm">2. T√™n H·∫°ng m·ª•c:</label>
                    <input type="text" id="itemNameQuoteForm" placeholder="V√≠ d·ª•: S∆°n Nippon">
                </div>
                <div class="form-group">
                    <label for="itemSpecQuoteForm">3. Quy c√°ch/M√¥ t·∫£ chi ti·∫øt:</label>
                    <textarea id="itemSpecQuoteForm" rows="2" placeholder="V√≠ d·ª•: Lo·∫°i A, m√†u X, b√≥ng m·ªù..."></textarea>
                </div>
                <div class="item-grid">
                    <div class="form-group">
                        <label for="itemUnitQuoteForm">ƒê∆°n v·ªã t√≠nh:</label>
                        <input type="text" id="itemUnitQuoteForm" placeholder="V√≠ d·ª•: m¬≤, c√°i">
                    </div>
                    <div class="form-group">
                        <label for="itemPriceQuoteForm">ƒê∆°n gi√° (VNƒê):</label>
                        <input type="number" id="itemPriceQuoteForm" placeholder="0" min="0">
                    </div>
                     <div class="form-group">
                        <label for="itemDiscountValueForm">Gi·∫£m gi√° h·∫°ng m·ª•c:</label>
                        <div style="display: flex;">
                            <input type="number" id="itemDiscountValueForm" value="0" min="0" style="flex-grow: 1;">
                            <select id="itemDiscountTypeForm" style="width: 80px; margin-left: 5px; flex-shrink: 0;">
                                <option value="percent">%</option>
                                <option value="amount">VNƒê</option>
                            </select>
                        </div>
                    </div>
                     <div class="form-group">
                        <label for="itemCalcTypeQuoteForm">C√°ch t√≠nh gi√°:</label>
                        <select id="itemCalcTypeQuoteForm">
                            <option value="unit">Theo ƒê∆°n v·ªã (Gi√° x SL)</option>
                            <option value="length">Theo Chi·ªÅu d√†i (Gi√° x D√†i x SL)</option>
                            <option value="area">Theo Di·ªán t√≠ch (Gi√° x D√†i x Cao x SL)</option> <option value="volume">Theo Th·ªÉ t√≠ch (Gi√° x D√†i x Cao x S√¢u x SL)</option> </select>
                    </div>
                </div>
                <div class="item-grid-col4">
                     <div class="form-group">
                        <label for="itemLengthQuoteForm">D√†i (mm):</label>
                        <input type="number" id="itemLengthQuoteForm" placeholder="N·∫øu c√≥" min="0" step="0.01">
                    </div>
                    <div class="form-group">
                        <label for="itemHeightQuoteForm">Cao (mm):</label> <input type="number" id="itemHeightQuoteForm" placeholder="N·∫øu c√≥" min="0" step="0.01">
                    </div>
                    <div class="form-group">
                        <label for="itemDepthQuoteForm">S√¢u (mm):</label> <input type="number" id="itemDepthQuoteForm" placeholder="N·∫øu c√≥" min="0" step="0.01">
                    </div>
                     <div class="form-group">
                        <label for="itemQuantityQuoteForm">S·ªë l∆∞·ª£ng (b·ªô/c√°i):</label>
                        <input type="number" id="itemQuantityQuoteForm" value="1" min="0.01" step="0.01">
                    </div>
                </div>
                <div class="form-group">
                    <label for="itemImageFileQuoteForm">H√¨nh ·∫£nh h·∫°ng m·ª•c (nh·ªè, <500KB):</label>
                    <input type="file" id="itemImageFileQuoteForm" accept="image/*">
                    <img id="itemImagePreviewQuoteForm" src="#" alt="Item Image Preview">
                </div>
                <button id="addOrUpdateItemButtonForm">Th√™m v√†o B√°o gi√°</button>
                <button id="quickSaveToCatalogButtonForm" class="quick-save-to-catalog-btn" title="L∆∞u h·∫°ng m·ª•c n√†y v√†o Danh m·ª•c ch√≠nh">L∆∞u v√†o DM</button>
                <button id="cancelEditQuoteItemButtonForm" class="clear-btn" style="display:none;">H·ªßy S·ª≠a Item</button>
            </div>
            
            <hr>
            <h2>Chi ti·∫øt B√°o gi√° Hi·ªán t·∫°i</h2>
            <div style="overflow-x:auto;">
                <table id="quoteTablePreview">
                    <thead>
                        <tr>
                            <th style="width:4%;">STT</th>
                            <th style="width:12%;">H√¨nh ·∫£nh</th> <th style="width:28%;">H·∫°ng M·ª•c / Danh M·ª•c Ch√≠nh</th> 
                            <th style="width:6%;">ƒêVT</th>
                            <th style="width:7%;">K.L∆∞·ª£ng</th> <th style="width:5%;">SL</th> 
                            <th style="width:9%;">ƒê∆°n gi√°</th>
                            <th style="width:11%;">Th√†nh ti·ªÅn</th>
                            <th class="no-print" style="width: auto;">H√†nh ƒë·ªông</th>
                        </tr>
                    </thead>
                    <tbody id="itemListPreview"></tbody>
                </table>
            </div>
            <button id="prepareNewQuoteItemButton" class="add-new-row-btn no-print" style="margin-top:10px;" title="X√≥a tr·∫Øng form tr√™n ƒë·ªÉ nh·∫≠p h·∫°ng m·ª•c m·ªõi">+ Chu·∫©n b·ªã th√™m h·∫°ng m·ª•c m·ªõi</button>
            
            <div class="total-section">
                <div class="form-group-inline">
                    <input type="checkbox" id="applyDiscountCheckbox" checked >
                    <label for="applyDiscountCheckbox">Gi·∫£m gi√°:</label>
                    <input type="number" id="discountValueInput" value="0" min="0">
                    <select id="discountTypeSelect" style="width: 80px; margin-left: 5px;">
                        <option value="percent">%</option>
                        <option value="amount">VNƒê</option>
                    </select>
                    <span id="discountAmount" style="min-width: 100px; text-align:left; margin-left:5px;">(0 VNƒê)</span>
                </div>
                <div class="form-group-inline">
                    <input type="checkbox" id="applyTaxCheckbox" checked >
                    <label for="applyTaxCheckbox">Thu·∫ø VAT (%):</label>
                    <input type="number" id="taxPercent" value="0" min="0">
                    <span id="taxAmount" style="min-width: 100px; text-align:left; margin-left:5px;">(0 VNƒê)</span>
                </div>
                 <div><label>T·∫°m t√≠nh:</label><span id="subTotal">0 VNƒê</span></div>
                <hr style="margin: 10px 0; border-color: #ddd;">
                <div class="grand-total"><label>T·ªïng c·ªông:</label><span id="totalPrice">0 VNƒê</span></div>
            </div>
            
            <div class="installments-section no-print">
                <hr style="border-color: #007bff; border-width: 1px; margin-top: 25px;">
                <div class="form-group-inline" style="justify-content: flex-start;">
                    <input type="checkbox" id="applyInstallmentsCheckbox">
                    <label for="applyInstallmentsCheckbox" style="font-weight: bold; font-size: 1.1em; color: #007bff;">B·∫≠t L·ªãch thanh to√°n theo ƒë·ª£t</label>
                </div>
                <div id="installmentsContainer" class="installments-container" style="display: none;">
                    <div class="installment-row-header">
                        <span>N·ªôi dung ƒë·ª£t</span>
                        <span>Gi√° tr·ªã</span>
                        <span>Lo·∫°i</span>
                        <span>Th√†nh ti·ªÅn (VNƒê)</span>
                    </div>
                    <div class="installment-row">
                        <input type="text" id="installmentName1" value="ƒê·ª£t 1: T·∫°m ·ª©ng" placeholder="N·ªôi dung ƒë·ª£t 1">
                        <input type="number" id="installmentValue1" placeholder="Gi√° tr·ªã" min="0">
                        <select id="installmentType1">
                            <option value="percent">%</option>
                            <option value="amount">VNƒê</option>
                        </select>
                        <span id="installmentAmount1" class="installment-amount-display">0 VNƒê</span>
                    </div>
                    <div class="installment-row">
                        <input type="text" id="installmentName2" value="ƒê·ª£t 2" placeholder="N·ªôi dung ƒë·ª£t 2">
                        <input type="number" id="installmentValue2" placeholder="Gi√° tr·ªã" min="0">
                        <select id="installmentType2">
                            <option value="percent">%</option>
                            <option value="amount">VNƒê</option>
                        </select>
                        <span id="installmentAmount2" class="installment-amount-display">0 VNƒê</span>
                    </div>
                    <div class="installment-row">
                        <input type="text" id="installmentName3" value="ƒê·ª£t 3" placeholder="N·ªôi dung ƒë·ª£t 3">
                        <input type="number" id="installmentValue3" placeholder="Gi√° tr·ªã" min="0">
                        <select id="installmentType3">
                            <option value="percent">%</option>
                            <option value="amount">VNƒê</option>
                        </select>
                        <span id="installmentAmount3" class="installment-amount-display">0 VNƒê</span>
                    </div>
                    <div class="installment-row">
                        <input type="text" id="installmentName4" value="ƒê·ª£t 4: B√†n giao" placeholder="N·ªôi dung ƒë·ª£t 4">
                        <input type="number" id="installmentValue4" placeholder="Gi√° tr·ªã" min="0">
                        <select id="installmentType4">
                            <option value="percent">%</option>
                            <option value="amount">VNƒê</option>
                        </select>
                        <span id="installmentAmount4" class="installment-amount-display">0 VNƒê</span>
                    </div>
                    <div class="installment-summary">
                        <span id="installmentsTotalPercent">T·ªïng %: <strong>0%</strong></span>
                        <span>T·ªïng c·ªông c√°c ƒë·ª£t: <strong id="installmentsTotalAmount">0 VNƒê</strong></span>
                        <span>C√≤n l·∫°i: <strong id="installmentsRemainingAmount">0 VNƒê</strong></span>
                    </div>
                </div>
            </div>
            
            <button id="saveCurrentQuoteButton" class="save-btn no-print">L∆∞u B√°o gi√° n√†y</button>
            <button id="exportPdfButton" class="pdf-btn no-print">Xu·∫•t PDF</button>
            <button id="printQuoteButton" class="print-btn no-print">In B√°o gi√°</button>
            <button id="clearQuoteButton" class="clear-btn no-print">L√†m m·ªõi To√†n b·ªô</button>
        </div>

        <div id="tabSavedQuotes" class="tab-content">
            <h2>Danh s√°ch B√°o gi√° ƒê√£ l∆∞u</h2>
            <div style="max-height: 400px; overflow-y: auto; border: 1px solid #eee;">
                <table id="savedQuotesTable">
                    <thead><tr><th>ID B√°o gi√°</th><th>Kh√°ch h√†ng</th><th>Ng√†y t·∫°o</th><th>T·ªïng ti·ªÅn</th><th class="no-print">H√†nh ƒë·ªông</th></tr></thead>
                    <tbody id="savedQuotesList"></tbody>
                </table>
            </div>
        </div>

        <div id="tabCatalog" class="tab-content">
            <!-- N·ªôi dung tab Qu·∫£n l√Ω kh√¥ng thay ƒë·ªïi -->
            <h2>Qu·∫£n L√Ω Danh M·ª•c S·∫£n ph·∫©m/D·ªãch v·ª•</h2>
            <div class="form-group">
                <label for="excelFileManage">1. Ch·ªçn file Excel (.xlsx, .xls, .csv) ƒë·ªÉ t·∫£i danh m·ª•c:</label>
                <input type="file" id="excelFileManage" accept=".xlsx, .xls, .csv">
                <button id="reloadExcelButton" class="reload-excel-btn no-print" title="M·ªü l·∫°i h·ªôp tho·∫°i ch·ªçn file">T·∫£i/Ch·ªçn File Danh m·ª•c</button>
                <p style="font-size:0.85em; color:#6c757d;"><i>File Excel c·∫ßn c√≥ c·ªôt: `TenHangMuc`, `DonViTinh`, `DonGia`. C·ªôt `QuyCach` v√† `ID` l√† t√πy ch·ªçn.</i></p>
            </div>
            <div class="form-group">
                <label for="catalogSearchInput">L·ªçc danh m·ª•c hi·ªán t·∫°i:</label>
                <input type="text" id="catalogSearchInput" placeholder="G√µ t√™n ho·∫∑c quy c√°ch ƒë·ªÉ l·ªçc..." style="width: 70%;">
            </div>
            <h3>Danh m·ª•c hi·ªán t·∫°i (<span id="catalogItemCount">0</span> h·∫°ng m·ª•c)</h3>
            <div style="max-height: 300px; overflow-y: auto; border: 1px solid #eee; margin-bottom:15px;">
                <table id="catalogPreviewTable">
                    <thead><tr><th>ID</th><th>T√™n H·∫°ng M·ª•c</th><th>Quy C√°ch</th><th>ƒêVT</th><th>ƒê∆°n Gi√°</th><th class="no-print">H√†nh ƒë·ªông</th></tr></thead>
                    <tbody id="catalogPreviewList"></tbody>
                </table>
            </div>
            <button id="exportCatalogButton" class="save-catalog-btn no-print">T·∫£i v·ªÅ Danh m·ª•c hi·ªán t·∫°i (Excel)</button>
            
            <hr class="no-print">
            <h3>Qu·∫£n L√Ω Danh M·ª•c Ch√≠nh</h3>
            <div class="form-group">
                <label for="mainCategoryNameInput">T√™n Danh m·ª•c ch√≠nh:</label>
                <input type="text" id="mainCategoryNameInput" placeholder="V√≠ d·ª•: H·∫°ng m·ª•c S∆°n n∆∞·ªõc">
                <input type="hidden" id="editingMainCategoryId">
                <button id="addOrUpdateMainCategoryButton" class="no-print" style="margin-left: 10px;">Th√™m/C·∫≠p nh·∫≠t DM Ch√≠nh</button>
                <button id="cancelEditMainCategoryButton" class="clear-btn no-print" style="display:none; margin-left: 5px;">H·ªßy S·ª≠a</button>
            </div>
            <h4>Danh s√°ch Danh m·ª•c ch√≠nh hi·ªán c√≥ (<span id="mainCategoryCount">0</span>):</h4>
            <div style="max-height: 200px; overflow-y: auto; border: 1px solid #eee; margin-bottom:15px;">
                <table id="mainCategoriesTable">
                    <thead><tr><th style="width:10%;">STT</th><th>T√™n Danh m·ª•c ch√≠nh</th><th class="no-print" style="width:20%;">H√†nh ƒë·ªông</th></tr></thead>
                    <tbody id="mainCategoriesList"></tbody>
                </table>
            </div>

            <hr class="no-print">
            <h3>Th√™m / S·ª≠a H·∫°ng m·ª•c trong Danh m·ª•c (tr√™n tr√¨nh duy·ªát)</h3>
            <input type="hidden" id="editingCatalogEntryId">
            <div class="form-group" style="display: none;"> 
                <label for="catalogItemMainCategorySelect">Thu·ªôc Danh m·ª•c ch√≠nh (t√πy ch·ªçn):</label> 
                <select id="catalogItemMainCategorySelect"> 
                    <option value="">-- Kh√¥ng ch·ªçn --</option>
                </select> 
            </div> 
            
            <div class="form-group">
                <label for="catalogEditName">T√™n H·∫°ng m·ª•c:</label>
                <input type="text" id="catalogEditName">
            </div>
             <div class="form-group">
                <label for="catalogEditSpec">Quy c√°ch/M√¥ t·∫£ chi ti·∫øt:</label>
                <textarea id="catalogEditSpec" rows="2"></textarea>
            </div>
            <div class="item-grid">
                <div class="form-group">
                    <label for="catalogEditUnit">ƒê∆°n v·ªã t√≠nh:</label>
                    <input type="text" id="catalogEditUnit">
                </div>
                <div class="form-group">
                    <label for="catalogEditPrice">ƒê∆°n gi√° (VNƒê):</label>
                    <input type="number" id="catalogEditPrice" min="0">
                </div>
            </div>
            <button id="saveCatalogEntryButton" class="no-print">Th√™m/C·∫≠p nh·∫≠t v√†o Danh m·ª•c</button>
            <button id="cancelCatalogEntryEditButton" class="clear-btn no-print" style="display:none;">H·ªßy S·ª≠a</button>
        </div>

        <div id="tabSettings" class="tab-content">
             <!-- N·ªôi dung tab C√†i ƒë·∫∑t kh√¥ng thay ƒë·ªïi, tr·ª´ vi·ªác b·ªè ƒëi ph·∫ßn Storage Status -->
             <h2>C√†i ƒê·∫∑t Th√¥ng Tin C√¥ng Ty</h2>
             <div class="item-grid"> <div class="form-group"> <label for="companyNameSetting">T√™n C√¥ng ty/C√° nh√¢n:</label> <input type="text" id="companyNameSetting"> </div> <div class="form-group"> <label for="companyAddressSetting">ƒê·ªãa ch·ªâ:</label> <input type="text" id="companyAddressSetting"> </div> </div>
             <div class="item-grid"> <div class="form-group"> <label for="companyPhoneSetting">ƒêi·ªán tho·∫°i:</label> <input type="text" id="companyPhoneSetting"> </div> <div class="form-group"> <label for="companyEmailSetting">Email:</label> <input type="email" id="companyEmailSetting"> </div> </div>
             <div class="form-group"> <label for="companyTaxIdSetting">M√£ s·ªë thu·∫ø (N·∫øu c√≥):</label> <input type="text" id="companyTaxIdSetting"> </div>
             <div class="form-group">
                 <label for="companyBankAccountSetting">Th√¥ng tin chuy·ªÉn kho·∫£n (Ng√¢n h√†ng, STK, Ch·ªß TK):</label>
                 <textarea id="companyBankAccountSetting" rows="3"></textarea>
             </div>
             <div class="form-group"> <label for="companyLogoFile">Logo (·∫£nh nh·ªè, <1MB):</label> <input type="file" id="companyLogoFile" accept="image/*"> <img id="logoPreview" src="#" alt="Logo Preview"> </div>
             <button id="saveCompanySettingsButton" class="save-btn">L∆∞u</button>
             <hr>
             
             <!-- Ph·∫ßn Storage Status ƒë√£ b·ªã x√≥a -->

             <h3 style="color: #dc3545;">Khu v·ª±c nguy hi·ªÉm</h3>
             <button id="clearAllDataButton" class="delete-btn">X√≥a To√†n B·ªô D·ªØ Li·ªáu ·ª®ng D·ª•ng</button>
             <p style="font-size:0.85em; color:#6c757d;"><i>L∆ØU √ù: H√†nh ƒë·ªông n√†y s·∫Ω x√≥a t·∫•t c·∫£ c√°c b√°o gi√° ƒë√£ l∆∞u, danh m·ª•c, v√† c√†i ƒë·∫∑t c√¥ng ty c·ªßa ng∆∞·ªùi d√πng hi·ªán t·∫°i tr√™n ƒë√°m m√¢y. Kh√¥ng th·ªÉ ho√†n t√°c.</i></p>
        </div>
        
        <div id="printableQuoteArea" style="display: none; width: 210mm; padding: 10mm; box-sizing: border-box;">
            <!-- Ph·∫ßn in ·∫•n kh√¥ng thay ƒë·ªïi -->
            <div class="print-header">
                <img id="printableLogo" src="#" alt="Company Logo" class="company-logo-print" style="display:none;">
                <div class="company-details-print" id="printableCompanyInfo">
                    <p><strong id="printableCompanyName"></strong></p>
                    <p>ƒê/c: <span id="printableCompanyAddress"></span></p>
                    <p>ƒêT: <span id="printableCompanyPhone"></span> | Email: <span id="printableCompanyEmail"></span></p>
                    <p>MST: <span id="printableCompanyTaxId"></span></p>
                </div>
            </div>
            <h2 style="font-size:18pt; text-transform: uppercase; margin-top: 15px; margin-bottom:15px;">B√ÅO GI√Å</h2>
            <div class="quote-meta">
                <div>
                    <p><strong>Ng√†y b√°o gi√°:</strong> <span id="printQuoteDate"></span></p>
                    <p><strong>M√£ b√°o gi√°:</strong> <span id="printQuoteIdEl"></span></p>
                </div>
            </div>
            <hr style="border-top: 1px solid #555; margin: 10px 0;">
            <div class="customer-details">
                <p><strong>K√≠nh g·ª≠i:</strong> <span id="printCustomerName"></span></p>
                <p><strong>ƒê·ªãa ch·ªâ:</strong> <span id="printCustomerAddress"></span></p>
            </div>
            <table id="printQuoteTable" style="margin-top:10px;">
                <thead>
                    <tr>
                        <th style="width:3%;">STT</th>
                        <th style="width:18%;">H√¨nh ·∫£nh</th> <th style="width:32%;">H·∫°ng M·ª•c / Danh M·ª•c Ch√≠nh</th> <th style="width:7%;">ƒêVT</th>
                        <th style="width:7%;">K.L∆∞·ª£ng</th> 
                        <th style="width:5%;">SL</th>
                        <th style="width:8%;">ƒê∆°n gi√°</th>
                        <th style="width:10%;">Th√†nh ti·ªÅn</th>
                    </tr>
                </thead>
                <tbody id="printItemList"></tbody>
            </table>
            <div class="summary-section" style="margin-top:15px;">
                <p id="printSubTotalLine"><span>T·∫°m t√≠nh:</span> <strong id="printSubTotal"></strong></p>
                <p id="printDiscountLine" style="display:none;"><span>Gi·∫£m gi√°:</span> <strong id="printDiscountAmount"></strong></p>
                <p id="printSubTotalAfterDiscountLine" style="display:none;"><span>Th√†nh ti·ªÅn sau gi·∫£m gi√°:</span> <strong id="printSubTotalAfterDiscount"></strong></p>
                <p id="printTaxLine" style="display:none;"><span>Thu·∫ø VAT (<span id="printTaxPercent"></span>%):</span> <strong id="printTaxAmount"></strong></p>
                <p class="grand-total-print" style="border-top:1px solid #333; padding-top:8px; margin-top:8px;">
                    <strong>T·ªîNG C·ªòNG THANH TO√ÅN:</strong> <strong id="printTotalPrice"></strong>
                </p>
                <p style="margin-top:5px;"><i>(B·∫±ng ch·ªØ: <span id="printTotalInWords" style="font-weight:bold;"></span>)</i></p>
            </div>
            
            <div class="payment-schedule-print" id="paymentSchedulePrint" style="display:none; margin-top: 20px;">
                <h3 style="text-align: left; font-size: 11pt; margin-bottom: 5px; text-transform: uppercase;">L·ªãch thanh to√°n</h3>
                <div id="paymentScheduleBodyPrint"></div>
            </div>

            <div class="payment-info-print" id="paymentInfoPrint" style="display: none; margin-top: 15px;">
                 <h3 style="text-align: left; font-size: 11pt; margin-bottom: 5px; text-transform: uppercase;">Th√¥ng tin thanh to√°n</h3>
                 <p id="paymentInfoBodyPrint" style="white-space: pre-wrap;"></p>
            </div>
             
             <div class="quote-notes-print" style="margin-top:20px;">
                <p><strong>Ghi ch√∫ chung:</strong></p>
                <p id="printQuoteNotes" style="white-space: pre-wrap; min-height:30px; border: 1px dashed #eee; padding:5px;"></p>
            </div>
            <div class="signatures">
                <div><p>Kh√°ch h√†ng</p><p>(K√Ω, ghi r√µ h·ªç t√™n)</p><br><br><br></div>
                <div><p>Ng∆∞·ªùi l·∫≠p b√°o gi√°</p><p>(K√Ω, ghi r√µ h·ªç t√™n)</p><br><br><br></div>
            </div>
        </div>
    </div> 
    
    <div id="loader" class="loader-overlay" style="display: none;">
        <div class="loader-spinner"></div>
    </div>
    
    <!-- T·∫£i Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-firestore-compat.js"></script>

    <!-- T·∫£i c√°c modules c·ªßa ·ª©ng d·ª•ng -->
    <script src="js/firebase.js" type="module"></script>
    <script src="js/main.js" type="module"></script>
</body>
</html>
